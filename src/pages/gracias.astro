---
// Página de agradecimiento con formulario opcional de Tally
import Layout from '../layouts/Layout.astro';
---

<Layout title="¡Bienvenido Aventurero! - Skillion"> 
  <!-- Overlay de bienvenida -->

<div class="p-4" id="tally-container"></div>

<script>
  (function(){
    var d=document;
    var params = new URLSearchParams(window.location.search);
    var qLang = params.get('lang');
    var isSpanish = qLang ? qLang.toLowerCase().startsWith('es') : (navigator.language || '').toLowerCase().startsWith('es');
    var src = isSpanish
      ? 'https://tally.so/embed/nGOORL?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1'
      : 'https://tally.so/embed/n0W046?alignLeft=1&hideTitle=1&transparentBackground=1&dynamicHeight=1';
    var iframe = d.createElement('iframe');
    iframe.src = src;
    iframe.loading = 'lazy';
    iframe.width = '100%';
    iframe.height = '752';
    iframe.setAttribute('frameborder', '0');
    iframe.setAttribute('marginheight', '0');
    iframe.setAttribute('marginwidth', '0');
    iframe.title = isSpanish ? '¡Bienvenido Jugador!' : 'Welcome Player!';
    var container = d.getElementById('tally-container');
    if (container) container.appendChild(iframe);
  })();
  </script>

  <!-- Botón para volver -->
  <a 
    href="/" 
    class="fixed bottom-4 right-4 md:bottom-6 md:right-6 bg-pixel-card/90 border-2 border-pixel-border text-pixel-text-secondary px-3 py-2 md:px-4 md:py-2 rounded font-poppins text-xs md:text-sm cursor-pointer transition-all duration-300 z-20 no-underline hover:bg-gaming-gold/10 hover:border-gaming-gold hover:text-gaming-gold hover:-translate-y-1 backdrop-blur-sm"
  >
    ← Volver al inicio / Go back home
  </a>

  <script>
    // Analytics opcional - registrar llegada a página de agradecimiento
    console.log('Usuario llegó a página de agradecimiento');
    
    // Si hay parámetros de email en la URL, podríamos hacer tracking adicional
    var urlParams = new URLSearchParams(window.location.search);
    var email = urlParams.get('email');
    if (email) {
      console.log('Email del usuario:', email);
    }

        



  </script>

</Layout>
